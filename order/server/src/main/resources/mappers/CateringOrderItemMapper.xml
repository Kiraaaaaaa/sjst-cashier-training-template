<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.meituan.catering.management.order.dao.mapper.CateringOrderItemMapper">

    <resultMap id="BaseResultMap" type="com.meituan.catering.management.order.dao.model.CateringOrderItemDO">
        <id column="id" jdbcType="BIGINT" property="id"/>
        <result column="tenant_id" jdbcType="BIGINT" property="tenantId"/>
        <result column="version" jdbcType="INTEGER" property="version"/>
        <result column="order_id" jdbcType="BIGINT" property="orderId"/>
        <result column="seq_no" jdbcType="VARCHAR" property="seqNo"/>
        <result column="status" jdbcType="VARCHAR" property="status"/>
        <result column="place_quantity" jdbcType="DECIMAL" property="placeQuantity"/>
        <result column="produce_quantity" jdbcType="DECIMAL" property="produceQuantity"/>
        <result column="latest_quantity" jdbcType="DECIMAL" property="latestQuantity"/>
        <result column="product_id" jdbcType="BIGINT" property="productId"/>
        <result column="product_name_on_place" jdbcType="VARCHAR" property="productNameOnPlace"/>
        <result column="product_unit_price_on_place" jdbcType="DECIMAL" property="productUnitPriceOnPlace"/>
        <result column="product_unit_of_measure_on_place" jdbcType="VARCHAR" property="productUnitOfMeasureOnPlace"/>
        <result column="product_method_id" jdbcType="BIGINT" property="productMethodId"/>
        <result column="product_method_name_on_place" jdbcType="VARCHAR" property="productMethodNameOnPlace"/>
        <result column="product_method_group_name_on_place" jdbcType="VARCHAR" property="productMethodGroupNameOnPlace"/>
    </resultMap>

    <sql id="Base_Column_List">
        id
        ,tenant_id
        ,version
        ,order_id
        ,seq_no
        ,status
        ,place_quantity
        ,produce_quantity
        ,latest_quantity
        ,product_id
        ,product_name_on_place
        ,product_unit_price_on_place
        ,product_unit_of_measure_on_place
        ,product_method_id
        ,product_method_name_on_place
        ,product_method_group_name_on_place
    </sql>

    <insert id="insert" useGeneratedKeys="true" keyProperty="id">
        insert into `catering_order_item` (<include refid="Base_Column_List"/>)
        values(
        0
        ,#{tenantId}
        ,#{version}
        ,#{orderId}
        ,#{seqNo}
        ,#{status}
        ,#{placeQuantity}
        ,#{produceQuantity}
        ,#{latestQuantity}
        ,#{productId}
        ,#{productNameOnPlace}
        ,#{productUnitPriceOnPlace}
        ,#{productUnitOfMeasureOnPlace}
        ,#{productMethodId}
        ,#{productMethodNameOnPlace}
        ,#{productMethodGroupNameOnPlace}
        )
    </insert>
    <select id="queryByOrderId" resultMap="BaseResultMap">
        select <include refid="Base_Column_List"/>
        from `catering_order_item`
        where `tenant_id` = #{tenantId}
        and `order_id` = #{orderId}
    </select>

</mapper>